import{k as V,q as W,l as X,m as Y,n as Z,i as ee}from"../chunks/firebase.BwfJqXMx.js";import{H as te}from"../chunks/control.CYgJF_JY.js";import{s as se,e as v,a as E,t as P,L as ae,c as w,f as d,g as U,b as q,d as A,p as f,r as C,h as _,i as N,j as D,M as ne,N as oe}from"../chunks/scheduler.BEXlFcv1.js";import{S as le,i as re,t as M,e as ie,b as O,c as ce,a as ue,m as me,d as he,g as fe}from"../chunks/index.7KKCNSNY.js";import{e as G,U as _e,g as pe,a as de}from"../chunks/UserLink.BHTt9wWk.js";function F(i,n){throw new te(i,n)}new TextEncoder;const ge=async({params:i})=>{var m,l;const n=V(ee,"users"),o=W(n,Y("username","==",i.username),X(1)),c=await Z(o),u=(m=c.docs[0])==null?void 0:m.exists(),s=(l=c.docs[0])==null?void 0:l.data();if(!u)throw F(404,"That user does not exist!");if(!s.published)throw F(403,`The profile of @${s.username} is not public!`);return{username:s.username,photoURL:s.photoURL,bio:s.bio,links:s.links??[]}},ye=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function J(i,n,o){const c=i.slice();return c[1]=n[o],c}function K(i){let n,o,c,u;const s=[i[1]];let m={};for(let l=0;l<s.length;l+=1)m=oe(m,s[l]);return o=new _e({props:m}),{c(){n=v("li"),ce(o.$$.fragment),c=E()},l(l){n=w(l,"LI",{});var h=q(n);ue(o.$$.fragment,h),c=U(h),h.forEach(d)},m(l,h){N(l,n,h),me(o,n,null),_(n,c),u=!0},p(l,h){const L=h&1?pe(s,[de(l[1])]):{};o.$set(L)},i(l){u||(M(o.$$.fragment,l),u=!0)},o(l){O(o.$$.fragment,l),u=!1},d(l){l&&d(n),he(o)}}}function be(i){let n,o,c,u,s,m,l,h=i[0].username+"",L,T,p,R,S,$,y=(i[0].bio??"no bio yet...")+"",j,H,b,g;document.title=n="@"+i[0].username+" Links";let k=G(i[0].links),a=[];for(let e=0;e<k.length;e+=1)a[e]=K(J(i,k,e));const Q=e=>O(a[e],1,1,()=>{a[e]=null});return{c(){o=v("meta"),u=E(),s=v("main"),m=v("h1"),l=P("@"),L=P(h),T=E(),p=v("img"),S=E(),$=v("p"),j=P(y),H=E(),b=v("ul");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){const r=ae("svelte-1yq7ltg",document.head);o=w(r,"META",{name:!0,content:!0}),r.forEach(d),u=U(e),s=w(e,"MAIN",{class:!0});var t=q(s);m=w(t,"H1",{class:!0});var x=q(m);l=A(x,"@"),L=A(x,h),x.forEach(d),T=U(t),p=w(t,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),S=U(t),$=w(t,"P",{class:!0});var z=q($);j=A(z,y),z.forEach(d),H=U(t),b=w(t,"UL",{class:!0});var B=q(b);for(let I=0;I<a.length;I+=1)a[I].l(B);B.forEach(d),t.forEach(d),this.h()},h(){f(o,"name","description"),f(o,"content",c=i[0].bio),f(m,"class","text-7xl text-purple-500"),C(p.src,R=i[0].photoURL??"/user.png")||f(p,"src",R),f(p,"alt","photoURL"),f(p,"width","256"),f(p,"height","256"),f(p,"class","mx-auto"),f($,"class","text-xl my-8"),f(b,"class","list-none my-6 flex flex-col justify-between"),f(s,"class","prose text-center mx-auto mt-8")},m(e,r){_(document.head,o),N(e,u,r),N(e,s,r),_(s,m),_(m,l),_(m,L),_(s,T),_(s,p),_(s,S),_(s,$),_($,j),_(s,H),_(s,b);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(b,null);g=!0},p(e,[r]){if((!g||r&1)&&n!==(n="@"+e[0].username+" Links")&&(document.title=n),(!g||r&1&&c!==(c=e[0].bio))&&f(o,"content",c),(!g||r&1)&&h!==(h=e[0].username+"")&&D(L,h),(!g||r&1&&!C(p.src,R=e[0].photoURL??"/user.png"))&&f(p,"src",R),(!g||r&1)&&y!==(y=(e[0].bio??"no bio yet...")+"")&&D(j,y),r&1){k=G(e[0].links);let t;for(t=0;t<k.length;t+=1){const x=J(e,k,t);a[t]?(a[t].p(x,r),M(a[t],1)):(a[t]=K(x),a[t].c(),M(a[t],1),a[t].m(b,null))}for(fe(),t=k.length;t<a.length;t+=1)Q(t);ie()}},i(e){if(!g){for(let r=0;r<k.length;r+=1)M(a[r]);g=!0}},o(e){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)O(a[r]);g=!1},d(e){e&&(d(u),d(s)),d(o),ne(a,e)}}}function ke(i,n,o){let{data:c}=n;return i.$$set=u=>{"data"in u&&o(0,c=u.data)},[c]}class Ee extends le{constructor(n){super(),re(this,n,ke,be,se,{data:0})}}export{Ee as component,ye as universal};
