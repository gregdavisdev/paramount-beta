import{s as D,k as S,e as _,a as v,t as F,c as g,m as A,g as w,b as P,f,d as H,p as n,r as j,i as R,h as L,q as I}from"../chunks/scheduler.BEXlFcv1.js";import{S as T,i as B,c as G,a as N,m as V,t as z,b as J,d as K}from"../chunks/index.7KKCNSNY.js";import{A as Q}from"../chunks/AuthCheck.Crkob2Dq.js";import{c as W,u as X,r as Y,d as Z,e as ee,g as te,f as se,h as ae,i as le}from"../chunks/firebase.BwfJqXMx.js";function q(c){let t,r="Uploading...",s,a;return{c(){t=_("p"),t.textContent=r,s=v(),a=_("progress"),this.h()},l(e){t=g(e,"P",{"data-svelte-h":!0}),A(t)!=="svelte-be0b5h"&&(t.textContent=r),s=w(e),a=g(e,"PROGRESS",{class:!0}),P(a).forEach(f),this.h()},h(){n(a,"class","progress progress-info w-56 mt-6")},m(e,o){R(e,t,o),R(e,s,o),R(e,a,o)},d(e){e&&(f(t),f(s),f(a))}}}function re(c){let t,r="Upload a Profile Photo",s,a,e,o,b,U,u,x='<span class="label-text">Pick a file</span>',C,h,k,y,d,$,E,M,i=c[2]&&q();return{c(){t=_("h2"),t.textContent=r,s=v(),a=_("form"),e=_("div"),o=_("img"),U=v(),u=_("label"),u.innerHTML=x,C=v(),h=_("input"),k=v(),i&&i.c(),y=v(),d=_("a"),$=F("Finish"),this.h()},l(l){t=g(l,"H2",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-1whglfv"&&(t.textContent=r),s=w(l),a=g(l,"FORM",{class:!0});var p=P(a);e=g(p,"DIV",{class:!0});var m=P(e);o=g(m,"IMG",{src:!0,alt:!0,class:!0}),U=w(m),u=g(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),A(u)!=="svelte-1186g42"&&(u.innerHTML=x),C=w(m),h=g(m,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),k=w(m),i&&i.l(m),m.forEach(f),p.forEach(f),y=w(l),d=g(l,"A",{href:!0,class:!0});var O=P(d);$=H(O,"Finish"),O.forEach(f),this.h()},h(){var l;n(t,"class","card-title"),j(o.src,b=c[1]??((l=c[0])==null?void 0:l.photoURL)??"default/default-avatar.png")||n(o,"src",b),n(o,"alt","photoURL"),n(o,"class","mx-auto"),n(u,"for","photoURL"),n(u,"class","label"),n(h,"name","photoURL"),n(h,"type","file"),n(h,"class","file-input file-input-bordered w-full max-w-xs"),n(h,"accept","image/png, image/jpeg, image/gif, image/webp"),n(e,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),n(a,"class","max-w-screen-md w-full"),n(d,"href",c[3]),n(d,"class","btn btn-primary")},m(l,p){R(l,t,p),R(l,s,p),R(l,a,p),L(a,e),L(e,o),L(e,U),L(e,u),L(e,C),L(e,h),L(e,k),i&&i.m(e,null),R(l,y,p),R(l,d,p),L(d,$),E||(M=I(h,"change",c[4]),E=!0)},p(l,p){var m;p&3&&!j(o.src,b=l[1]??((m=l[0])==null?void 0:m.photoURL)??"default/default-avatar.png")&&n(o,"src",b),l[2]?i||(i=q(),i.c(),i.m(e,null)):i&&(i.d(1),i=null),p&8&&n(d,"href",l[3])},d(l){l&&(f(t),f(s),f(a),f(y),f(d)),i&&i.d(),E=!1,M()}}}function oe(c){let t,r;return t=new Q({props:{$$slots:{default:[re]},$$scope:{ctx:c}}}),{c(){G(t.$$.fragment)},l(s){N(t.$$.fragment,s)},m(s,a){V(t,s,a),r=!0},p(s,[a]){const e={};a&79&&(e.$$scope={dirty:a,ctx:s}),t.$set(e)},i(s){r||(z(t.$$.fragment,s),r=!0)},o(s){J(t.$$.fragment,s),r=!1},d(s){K(t,s)}}}function ne(c,t,r){let s,a,e;S(c,W,u=>r(5,a=u)),S(c,X,u=>r(0,e=u));let o,b=!1;async function U(u){r(2,b=!0);const x=u.target.files[0];r(1,o=URL.createObjectURL(x));const C=Y(Z,`users/${a.uid}/profile.png`),h=await ee(C,x),k=await te(h.ref);await se(ae(le,"users",a.uid),{photoURL:k}),URL.revokeObjectURL(o),r(2,b=!1)}return c.$$.update=()=>{c.$$.dirty&1&&r(3,s=`/${e==null?void 0:e.username}/edit`)},[e,o,b,s,U]}class pe extends T{constructor(t){super(),B(this,t,ne,oe,D,{})}}export{pe as component};
